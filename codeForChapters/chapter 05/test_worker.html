<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Fibonacci Worker Demo</title>
  </head>
  <body>
    Fibonacci:
    <input id="num" type="number" min="0" value="0" />
    <br />
    <br />
    <button onclick="locally()">Locally</button>
    <button onclick="parallelly()">Parallelly</button>
    <br />
    <br />
    Result: <span id="res"></span>

    <script>
      const worker = new Worker(
        "http://localhost:8887/test_fib_worker.js"
      );
      worker.onmessage = (e) => showResult(e.data);

      function fib(n) {
        return n < 2 ? n : fib(n - 2) + fib(n - 1);
      }

      function getNumber() {
        return Number(document.getElementById("num").value);
      }

      function showResult(result) {
        document.getElementById("res").innerText = result;
      }

      function locally() {
        showResult(fib(getNumber()));
      }

      function parallelly() {
        worker.postMessage(getNumber());
      }
    </script>
  </body>
</html>
